{% extends "base.html" %}
{% load staticfiles %}


{% block javascript %}

	<!-- Jquery CountDown -->
	<script type="text/javascript" src="{% static 'js/jquery.plugin.js' %}"></script>
	<script type="text/javascript" src="{% static 'js/jquery.countdown.js' %}"></script>

	<script>
	   $('.carousel').carousel({
		   interval: 5000 //changes the speed
	   })
	   $('#ivo-contador').countdown({until: new Date(2017, 12-1, 25)});
   </script>

   <script type="text/javascript">
   	$(function(){
			$('#send_form_general').click(function(){
			if (validarForm( $('#form_general input') ) ) {
			    if( $('#inicio_fecha_a_o').val().trim() != ''  && $('#inicio_fecha_mes').val().trim() != ''  && $('#inicio_fecha_dia').val().trim() != ''   ){
			        $('#fecha_inicio').val($('#inicio_fecha_a_o').val()+"-"+$('#inicio_fecha_mes').val()+'-'+$('#inicio_fecha_dia').val());
                }
            
			    if( $('#fin_fecha_a_o').val().trim() != ''  && $('#fin_fecha_mes').val().trim() != ''  && $('#fin_fecha_dia').val().trim() != ''   ){
			        $('#fecha_fin').val($('#fin_fecha_a_o').val()+"-"+$('#fin_fecha_mes').val()+'-'+$('#fin_fecha_dia').val());
                }

				$('#form_general').submit();
			}
		});
	});
	function registrar(){

        NProgress.start();
        $.ajax({
            url: '/casting/crear/',
            type: 'post',
            dataType: 'json',
            data:  $('#form_general').serialize(),
            success: function (data) {
                NProgress.done();
                if(data.success == false){
                    alert(data.mensaje);
                    $.each(data.errors.fields, function(i, item) {
                        alert(i+ " "+item);
                    });
                }else{
                    alert(data.mensaje);
                    setTimeout(function(){
                      location.href  ='/casting/crear/'
                    }, 1500);

                }
            }
        });
    }
	</script>	

{% endblock %}

{% block cssblock %}

	<link href="{% static 'css/jquery.countdown.css' %}" rel="stylesheet">
	<style type="text/css">
	body {
		background-color: white;
	}
	</style>
{% endblock %}


	{% block content %}

		<div class="container">
			<div class="row ivo-configuracion">
				<div class="col-md-3 ivo-configuracion-menu">
					<ul>
						<li class="activo">
							<a href="/perfil/configuraciongeneral/">Volver a General</a>
							
						</li>
						
						<li class="ivo-configuracion-menu-separador"></li>
				<li id="show_form_bio">
					<a href="/casting/crear/">Crear Casting</a>
				</li>

					</ul>
				</div>
				<div class="col-md-9 ivo-formularioConf">
				<!-- FORMULARIO -->
				{% if messages %}
				<div class="messages">
				    {% for message in messages %}
				    <div{% if message.tags %} class="alert alert-{{ message.tags }}"{% endif %}>{{ message }}</li>
				    {% endfor %}
				</div>
				{% endif %}
					<form class="ivo-formularioConf-form ivo-formularioConf-form-nf" id="form_general" method="POST" enctype="multipart/form-data" >
							{% csrf_token %}
						<h1>Crear Casting</h1>
						<div class="row">
							<div class="col-md-3">
								<label class="ivo-bold">Titulo</label>
							</div>
							<div class="col-md-9">
								<input type="text" name="titulo">
							</div>
						</div>
						<div class="row">
							<div class="col-md-3">
								<label class="ivo-bold">Detalles</label>
							</div>
							<div class="col-md-9">
								<textarea name="descripcion"></textarea>
							</div>
						</div>
						<div class="row">
							<div class="col-md-3">
								<label class="ivo-bold">Informacion Detallada</label>
							</div>
							<div class="col-md-9">
								<div class="row ivo-formularioConf-form-grid">
								
									<div class="col-md-12 ivo-formularioConf-form-grid-img1 text-center">
									<input type="file" name="imagen_1" id="seleccionar_imagen_1" >
									<span class="glyphicon glyphicon-picture" ><label for="seleccionar_imagen_1">&nbsp;</label></span>
										
									</div>
									<div class="col-md-6 ivo-formularioConf-form-grid-img2 text-center">

										<input type="file" name="imagen_2" id="seleccionar_imagen_2" >
										<span class="glyphicon glyphicon-picture"> <label for="seleccionar_imagen_2">&nbsp;&nbsp;</label></span>
									</div>
									
									<div class="col-md-6 ivo-formularioConf-form-grid-text">
										<div class="col-md-12">
										
											<textarea class="uno" placeholder="Agregar Aqui Info Adicional Destacada" name="info_destacada"></textarea>
										</div>
										<div class="col-md-12">
										
											<textarea class="dos" placeholder="Agregar Aqui Info Adicional" name="info_adicional"></textarea>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-3">
								<label class="ivo-bold">Per&iacute;odo</label>
							</div>
							<div class="col-md-9 ivo-configuracion-form-fecha">
								<input class="fechad" type="text" maxlength="2" minlength="2"  onkeypress="return soloNumeros(event)" id="inicio_fecha_dia" > <div class="resaltar-separador">/</div>
								<input class="fechad" type="text" maxlength="2" minlength="2"  onkeypress="return soloNumeros(event)" id="inicio_fecha_mes"> <div class="resaltar-separador">/</div>
								<input class="fechay" type="text" maxlength="4" minlength="4"  onkeypress="return soloNumeros(event)" id="inicio_fecha_a_o"> <div class="resaltar-separador">-</div>
								<input class="fechad" type="text" maxlength="2" minlength="2"  onkeypress="return soloNumeros(event)" id="fin_fecha_dia" > <div class="resaltar-separador">/</div>
								<input class="fechad" type="text" maxlength="2" minlength="2"  onkeypress="return soloNumeros(event)" id="fin_fecha_mes"> <div class="resaltar-separador">/</div>
								<input class="fechay" type="text" maxlength="4" minlength="4"  onkeypress="return soloNumeros(event)" id="fin_fecha_a_o"> 
								<input type="hidden" name="fecha_inicio" id="fecha_inicio">
								<input type="hidden" name="fecha_fin" id="fecha_fin">
							</div>
						</div>
						<div class="row">
							<div class="col-md-3">
								<label class="ivo-bold">Sector</label>

							</div>
							<div class="col-md-9">

								<select name='categoria'>
									<option selected="selected" disabled>Seleccione una categoria</option>
									{%for categoria in categorias %}
										<option value='{{categoria.id}}'> {{categoria.nombre}}</option>
									{%endfor%}
								</select>
							</div>
						</div>
						<div class="row">
							<div class="col-md-12 text-right">
								<button class="ivo-boton-fondoInpt ivo-borde-trs-azulClaro">
									<span class="ivo-back-trs-azulClaro ivo-borde-transparente">Cancelar</span>
								</button>
								<button class="ivo-boton-fondoInpt ivo-borde-trs-azulClaro" style="margin-left: 10%;">
									<span class="ivo-back-trs-azulClaro ivo-borde-transparente" id="send_form_general">Crear</span>
								</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>

	{% endblock %}

	
