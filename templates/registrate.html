{% extends "base.html" %}
{% load i18n %}
{% load staticfiles %}

{% block cssblock %}
    <style type="text/css">
    .ivo-pregunta { height: auto;}
    </style>
{% endblock %}

{% block content %}
<!-- Intro -->
<div class="container-fluid ivo-pregunta" style="background-image: url({% static 'img/pregunta2.jpg' %});">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-lg-6">
                <h1>Reg&iacute;strate en </br>nuestra plataforma</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-10 col-md-10 col-lg-10  col-sm-offset-1 col-md-offset-1 col-lg-offset-1">
                <form method="POST" class="ivo-form ivo-form-registro" id="ivo-form-registro" action="/registrate/artista/">
                    <input type="hidden" name="genero" id="genero" required="required">
                    <input type="hidden" name="fecha_nacimiento" id="fecha_nacimiento">
                    <input type="hidden" name="tatuaje" id="tatuaje">
                    <input type="hidden" name="tipo_usuario" value="A">
                    <div class="row">
                        <div class="col-md-4 col-lg-4">
                            <input type="text" name="first_name" mensaje="{% trans 'Nombre es un campo requerido' %}"
                                   placeholder="{% trans 'Nombre' %}" required = "required" >
                        </div>
                        <div class="col-md-4 col-lg-4">
                            <input type="text" name="last_name" mensaje="{% trans 'Apellido es un campo requerido' %}"
                                   placeholder="{% trans 'Apellido' %}" required = "required">
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-4 col-lg-4">
                            <input type="email" name="email" placeholder="{% trans 'Correo Electrónico' %} " required = "required"
                                   mensaje="{% trans 'Email es un campo requerido' %}" style="color:white" >
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-4">
                            <div>Fecha de Nacimiento</div>
                            <input class="fechad" type="text" id="fecha_dia" minlength="2" maxlength="2"
                                   onkeypress="return soloNumeros(event)" required = "required"
                                   mensaje="{% trans 'Día de la fecha es un campo requerido' %}">
                            <div class="resaltar-separador">/</div>
                            <input class="fechad" type="text" id="fecha_mes" minlength="2" maxlength="2"
                                   onkeypress="return soloNumeros(event)" required = "required"
                                   mensaje="{% trans 'Mes de la fecha es un campo requerido' %}">
                            <div class="resaltar-separador">/</div>
                            <input class="fechay" type="text" id="fecha_a_o" minlength="4" maxlength="4"
                                   onkeypress="return soloNumeros(event)" required = "required"
                                   mensaje="{% trans 'Año de la fecha es un campo requerido' %}">
                            <br />
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 ivo-form-sx">
                            <div class="row text-center">
                                <div class="col-xs-12 col-sm-12 col-md-4 hidden-md hidden-lg text-left">
                                    {% trans "Sexo" %}:
                                </div>
                                <div class="col-xs-3 col-sm-3 col-md-4">
                                    <input type="checkbox" id="checkbox-2-1" genero = "M" class="regular-checkbox big-checkbox" />
                                    <label for="checkbox-2-1"></label>
                                    <h5>{% trans "Hombre" %}</h5>
                                </div>
                                <div class="col-xs-3 col-sm-3 col-md-4">
                                    <input type="checkbox" id="checkbox-2-2" genero = "F" class="regular-checkbox big-checkbox" />
                                    <label for="checkbox-2-2"></label>
                                    <h5>{% trans "Mujer" %}</h5>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-8 col-lg-8">
                            <div class="ivo-mensajes-select">
                                <div >
                                    <!-- NO ESTA HECHO COMO UN SELECT -->
                                    <!-- CAMBIAR PARA QUE SEA UN SELECT.. EL COMPORTAMIENTO DEBER SER EL MISMO Y SOLO VAMOS A GUARDAR EL TIPO DE ARTE, QUE EL LUEGO GUARDE EL GENERO ARTISTICO
                                    <button class="btn btn-default dropdown-toggle ivo-drop-ampliado-lista" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                        {% trans "Talentos" %}
                                        <span class="caret"></span>
                                    </button>
                                    <ul id = "telentos" class="dropdown-menu ivo-select-ampliado-lista" aria-labelledby="dropdownMenu1">                                        
                                    </ul>
                                    -->



                                    <select name="talento" placeholder="{% trans 'Talento' %}" required="required" mensaje = "{% trans 'Talento es una campo requerido' %}" id='talento'>
                                    <option selected="selected" disabled>Talento</option>
                                    {%for talento in artes %}
                                        <option value='{{talento.id}}'> {{talento.name}}</option>
                                    {%endfor%}
                                </select>
                                </div>
                            </div>
                        </div>


                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 ivo-form-tatu">
                            <div class="row">
                                <div class="col-xs-12 col-sm-12 col-md-4">
                                    Tatuajes:
                                </div>
                                <div class="col-xs-3 col-sm-3 col-md-4">
                                    <div class="ivo-formulario-radiotext">Si</div>
                                    <input type="radio" id="radio-1-1" name="radio-1-set" class="regular-radio" />
                                    <label for="radio-1-1"></label>
                                    <br />
                                </div>
                                <div class="col-xs-3 col-sm-3 col-md-4">
                                    <div class="ivo-formulario-radiotext">No</div>
                                    <input type="radio" id="radio-1-2" name="radio-1-set" class="regular-radio" />
                                    <label for="radio-1-2"></label>
                                    <br />
                                </div>
                            </div>
                        </div>
                    </div>

                     <div class="row">
                        <div class="col-md-8 col-lg-8">
                            <div class="ivo-mensajes-select">
                                <!--div class="dropdown ivo-drop-formulario"-->
                                    <!-- NO ESTA HECHO COMO UN SELECT -->
                                    <!-- CAMBIAR PARA QUE SEA UN SELECT.. EL COMPORTAMIENTO DEBER SER EL MISMO Y SOLO VAMOS A GUARDAR EL TIPO DE ARTE, QUE EL LUEGO GUARDE EL GENERO ARTISTICO
                                    <button class="btn btn-default dropdown-toggle ivo-drop-ampliado-lista" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                        {% trans "Talentos" %}
                                        <span class="caret"></span>
                                    </button>
                                    <ul id = "telentos" class="dropdown-menu ivo-select-ampliado-lista" aria-labelledby="dropdownMenu1">                                        
                                    </ul>
                                    -->
                                <div class="genero">      

                                   <select  placeholder="{% trans 'Genero' %}" required="required" mensaje = "{% trans 'Genero es una campo requerido' %}">
                                        <option selected="selected" disabled>Genero</option>  
                                
                                  
                                    </select>
                                                             
                                </div> 
                                    
                    {% for arte in artes %}
                        <div class="genero" id='arte-{{arte.id}}' hidden>              
                                
                                    <select name="generoarte" id="generoarte" >
                                    <option selected="selected" disabled>Genero</option> 
                                        {% for genero in generos %}         
                            <!-- LOS GENERO OCULTOS SIEMPRE? -->
                                            {% if arte.id == genero.id_tipo_arte.id%}
                                                <option value="{{genero.id}}">{{genero.name}}</option>
                                            {%endif%}
                                        {% endfor %}        
                                    </select>
                                                             
                        </div>

                    {% endfor %}
        


                                  
                                <!--/div-->
                            </div>
                        </div>



                        <div class="row">
                        <div class="col-md-4 col-lg-4">
                        </div>
                        </div>


                    <div class="row">
                        <div class="col-md-4 col-lg-4">
                        <select name="etnia" placeholder="{% trans 'Etnia' %}" required="required" mensaje = "{% trans 'Etnia es una campo requerido' %}">
                                    <option selected="selected" disabled>Etnia</option>
                                    {%for etnia in etnias %}
                                        <option value='{{etnia.id}}'> {{etnia.etnia}}</option>
                                    {%endfor%}
                                </select>
                            <!--input type="text" name="etnia" placeholder="{% trans 'Etnia' %}" required="required" mensaje = "{% trans 'Etnia es una campo requerido' %}"-->
                        </div>
                        <div class="col-md-4 col-lg-4">
                            <select name="color_cabello" placeholder="{% trans 'Color de Cabello' %}" required="required" mensaje = "{% trans 'Color de cabello es una campo requerido' %}">
                                    <option selected="selected" disabled>Color de cabello</option>
                                    {%for cabello in cabellos %}
                                        <option value='{{cabello.id}}'> {{cabello.color}}</option>
                                    {%endfor%}
                                </select>
                            <!--input type="text" name="color_cabello" placeholder="{% trans 'Color de Cabello' %}" required="required" mensaje = "{% trans 'Color de cabello es una campo requerido' %}"-->
                        </div>
                        <div class="col-md-4 col-lg-4">
                            <select name="color_ojos" placeholder="{% trans 'Color de Ojos' %}" required="required" mensaje = "{% trans 'Color de ojos es una campo requerido' %}">
                                    <option selected="selected" disabled>Color de ojos</option>
                                    {%for ojo in ojos %}
                                        <option value='{{ojo.id}}'> {{ojo.color}}</option>
                                    {%endfor%}
                                </select>
                            <!--input type="text" name="color_ojos" placeholder="{% trans 'Color de Ojos' %}" required="required" mensaje = "{% trans 'Color de ojos es una campo requerido' %}"-->
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-lg-4">
                            <input type="text" name="nacionalidad" placeholder="{% trans 'Nacionalidad' %}" required="required" mensaje = "{% trans 'Nacionalidad es una campo requerido' %}">
                        </div>
                        <div class="col-md-4 col-lg-4">
                            <select id="pais" name="pais">
                                <option value="VEN">Venezuela</option>
                                <option value="COL">Colombia</option>
                            </select>
                        </div>
                        <div class="col-md-4 col-lg-4">
                            <input type="text" name="ciudad" placeholder="{% trans 'Ciudad de Residencia' %}" required="required" mensaje = "{% trans 'Ciudad es una campo requerido' %}">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8 col-lg-8">
                            <input type="text" name="agencia" placeholder="{% trans 'Agencia / Manager' %}"  required="required" mensaje = "{% trans 'Agencia / Manager es una campo requerido' %}">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12">
                            <h4>{% trans 'Redes Sociales' %}</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-lg-4">
                            <div class="ivo-social-form">
                                <span class="social_facebook_circle"></span>
                            </div>
                            <input type="text" name="facebook" class="social">
                        </div>
                        <div class="col-md-4 col-lg-4">
                            <div class="ivo-social-form">
                                <span class="social_twitter_circle"></span>
                            </div>
                            <input type="text" name="twitter" class="social">
                        </div>
                        <div class="col-md-4 col-lg-4">
                            <div class="ivo-social-form">
                                <span class="social_instagram_circle"></span>
                            </div>
                            <input type="text" name="instagram" class="social">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-4 col-lg-4 col-md-offset-2">
                            <input type="password" name="password1" id="password1" placeholder="Clave" autocomplete="false" autosave="false" >
                        </div>
                        <div class="col-md-4 col-lg-4">
                            <input type="password" name="password2" id="password2" placeholder="Confirmar Clave" autosave="false" autocomplete="false">
                        </div>
                    </div>

                    <div class="row" style="margin:30px 0;">
                        <div class="col-md-2 col-lg-4 col-md-offset-3" style="margin: 0 auto !important; position: relative; float: initial;">
                            <div class="pull-left">
                                <input type="checkbox" name="terminos" id="checkbox-terminos" value="1" class="regular-checkbox">
                                <label for="checkbox-terminos"></label>
                            </div>
                            <div class="pull-right">
                                <a href="/terminos/" target="_blank"><i>Leer Terminos y Condiciones</i></a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-md-offset-3" style="text-align: center;">
                            <a class="ivo-boton-fondoInpt ivo-borde-trs-verde" id="btn_registrar" style="cursor: pointer">
                                <span class="ivo-back-trs-verde ivo-borde-transparente">Registrar</span>
                            </a>
                        </div>
                    </div>
                    {% csrf_token %}
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascript %}
<script>
    var cantidad_seleccion_tanlento = 0;
    $(function(){
        //getTalentos();
        $('#ivo-form-registro').submit(function(){
            return false;
        });
        $('input[type=checkbox]').click(function(){



            if($(this).attr('genero')){
                $('input[type=checkbox]').removeAttr('checked');
                $(this).prop("checked", "checked");
                $('#genero').val($(this).attr('genero'));
            }


        });
        $('input[type=radio]').click(function(){
            if($(this).attr('id') == 'radio-1-1'){
                $('#tatuaje').val(true);
            }else{
                $('#tatuaje').val(false);
            }
            
        });
        /*$(document).on('click', 'input[type=checkbox]',function(){
            if($(this).attr('name') == 'artes'){
                if(cantidad_seleccion_tanlento <= 3){
                    getGenerosArtisticos($(this).val())
                }
            }

        });*/
        
        $('#btn_registrar').click(function(){
            if( !$('#checkbox-terminos').is(':checked') ) {
                    alert('Debe aceptar los terminos y condiciones');
                    return;
                }
            if( $('#password1').val().trim() != $('#password2').val().trim()){
                alert(' {% trans 'Las contraseñas no coinciden' %} ')
                return;
            }
            if( $('#password1').val().trim()=='' || $('#password2').val().trim()==''){
                alert(' {% trans 'el campo contraseña es requerido' %} ')
                return;
            }
            if( $('#password1').val().trim().length<8 || $('#password2').val().trim().length<8){
                alert(' {% trans 'el campo contraseña debe ser mayor a ocho caracteres' %} ')
                return;
            }

            

        $('#fecha_nacimiento').val($('#fecha_a_o').val()+"-"+$('#fecha_mes').val()+'-'+$('#fecha_dia').val());
        registrar();    
            
               
            
        });
    })
    /*
    function getGenerosArtisticos(id_arte){
        NProgress.start();
        $.ajax({
            url: '/registrate/generos-artisticos/',
            type: 'get',
            dataType: 'json',
            data: {csrfmiddlewaretoken:'{{csrf_token }}', arte:id_arte},
            success: function (data) {
                NProgress.done();
                if(data.mensaje == ''){
                    $('#telentos').html(data.data);
                    $('.ivo-drop-ampliado-lista').trigger( "click" );
                }
            }
        });
    }*/
    /*
    function getTalentos(){
        NProgress.start();
        $.ajax({
            url: '/registrate/talentos/',
            type: 'get',
            dataType: 'json',
            data: {csrfmiddlewaretoken:'{{csrf_token }}'},
            success: function (data) {
                NProgress.done();
                if(data.mensaje == ''){
                    $('#telentos').html(data.data)
                }
            }
        });
    }
    */
    function registrar(){

        NProgress.start();
        $.ajax({
            url: '/registrate/artista/',
            type: 'post',
            dataType: 'json',
            data:  $('#ivo-form-registro').serialize(),
            success: function (data) {
                NProgress.done();
                if(data.success == false){
                    alert(data.mensaje);
                    $.each(data.errors.fields, function(i, item) {
                        alert(item);
                    });
                }else{
                    alert(data.mensaje);
                    setTimeout(function(){
                      location.href  ='/perfil/configuraciongeneral/'
                    }, 1500);

                }
            }
        });
    }


$('#talento').on('change', function () {
    $('.genero').hide()
    $('#arte-'+this.value).show()  
      

});
</script>
{% endblock javascript %}